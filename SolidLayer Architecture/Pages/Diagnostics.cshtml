@page
@model SolidLayer_Architecture.Pages.DiagnosticsModel
@{
    ViewData["Title"] = "System Diagnostics";
}

<h1>System Diagnostics</h1>

<div class="card mb-4">
    <div class="card-header">
        <h5>Database Connection</h5>
    </div>
    <div class="card-body">
        @if (Model.DbConnectionSuccessful)
        {
            <div class="alert alert-success">
                <i class="bi bi-check-circle"></i> Database connection successful!
            </div>
        }
        else
        {
            <div class="alert alert-danger">
                <i class="bi bi-exclamation-triangle"></i> Database connection failed!
            </div>
            <p>Error: @Model.DbConnectionError</p>
        }

        <div>
            <p><strong>Connection String:</strong> @Model.MaskedConnectionString</p>
        </div>

        @if (Model.TableStructure != null && Model.TableStructure.Count > 0)
        {
            <h5>Database Tables:</h5>
            <ul>
                @foreach (var table in Model.TableStructure)
                {
                    <li>
                        <strong>@table.Key</strong>
                        <ul>
                            @foreach (var column in table.Value)
                            {
                                <li>@column</li>
                            }
                        </ul>
                    </li>
                }
            </ul>
        }
    </div>
</div>

<div class="mt-3">
    <a asp-page="/Index" class="btn btn-primary">Back to Home</a>
</div>
